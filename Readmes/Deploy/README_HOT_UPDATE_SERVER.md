# 热更新服务器部署手册

热更新服务器是 SpringBoot 项目，按照 Maven 项目的方式进行发布和部署。

## 打包发布

在 pom 文件同级目录下，执行 mvn clean package 进行打包。

打包后文件默认在 target 文件夹中。

## 部署

热更新服务器项目中自带运行所需最基本的服务器，如果服务器主机已经有 java 1.8 的环境，那么运行 java -jar jar包名称 就可以启动热更新后台服务器。

## 数据库

热更新服务需要数据库，请按照自己的需要进行安装，需要导入的数据库结构在 Deploy/数据库 文件夹里。

安装数据库可能需要管理员权限，以本项目使用的 PostgreSQL 举例，在不使用管理员权限安装的情况下无法创建初始数据库，进而导致无法建立连接、无法进行数据库结构的导入。

## Postman

热更新服务器没有附带前端，使用 Postman 进行接口的调用，Postman 的备份在 Deploy/Postman 中，有一个请求备份和一个环境备份，都需要导入。

热更新后台使用了 CSRF 验证，因此 Postman 在上传热更新包之前需要先调用 Check Update 接口获取 Token，之后才可以上传热更新包。

上传热更新包通过 Upload Hot Update AssetBundles 接口进行，在 Params 中填写资源包的名称，在 Body 中选择资源包文件和 manifest 文件，发出请求后即可上传热更新包。
